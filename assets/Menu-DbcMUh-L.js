import{j as s,c as _,r as i,u as j,L as f,a as v,b as N,P as y,A as q}from"./index-D_nKzNSB.js";const w="_h1_1poq6_1",$={h1:w},k=({children:t,className:e,...c})=>s.jsx("h1",{className:_(e,$.h1),...c,children:t}),F="_input_1cn0t_1",E="_icon_1cn0t_20",d={input:F,"input-wrapper":"_input-wrapper_1cn0t_16",icon:E},L=i.forwardRef(function({isValid:e=!0,className:c,...r},o){return s.jsxs("div",{className:d["input-wrapper"],children:[s.jsx("input",{ref:o,className:_(d.input,c,{[d.invalid]:e}),...r}),s.jsx("img",{className:d.icon,src:"/search-icon.svg",alt:"Иконка поиска"})]})}),P="_head_o49l1_1",S={head:P},b="_head_1smfq_1",I="_card_1smfq_7",A="_footer_1smfq_14",C="_title_1smfq_18",M="_description_1smfq_25",R="_price_1smfq_32",D="_rating_1smfq_44",H="_currency_1smfq_56",V="_link_1smfq_75",n={head:b,card:I,footer:A,title:C,description:M,price:R,rating:D,currency:H,"add-to-cart":"_add-to-cart_1smfq_60",link:V},X=t=>{const e=j(),c=r=>{r.preventDefault(),e(v.add(t.id))};return s.jsx(f,{to:`/product/${t.id}`,className:n.link,children:s.jsxs("div",{className:n.card,children:[s.jsxs("div",{className:n.head,style:{backgroundImage:`url('${t.image}')`},children:[s.jsxs("div",{className:n.price,children:[t.price,s.jsx("span",{className:n.currency,children:" ₽"})]}),s.jsx("button",{onClick:c,className:n["add-to-cart"],children:s.jsx("img",{src:"/cart-button-icon.svg",alt:"Добавить в корзину"})}),s.jsxs("div",{className:n.rating,children:[t.rating," ",s.jsx("img",{src:"/star-icon.svg",alt:"Иконка звезды"})]})]}),s.jsxs("div",{className:n.footer,children:[s.jsx("div",{className:n.title,children:t.name}),s.jsx("div",{className:n.description,children:t.description})]})]})})},z="_wrapper_i1ij5_1",B={wrapper:z},G=({products:t})=>s.jsx("div",{className:B.wrapper,children:t.map(e=>s.jsx(X,{id:e.id,rating:e.rating,price:e.price,name:e.name,image:e.image,description:e.ingredients.join(", ")},e.id))});function K(){const[t,e]=i.useState([]),[c,r]=i.useState(!1),[o,m]=i.useState(),[l,h]=i.useState();i.useEffect(()=>{p(l)},[l]);const p=async u=>{r(!0);try{const{data:a}=await N.get(`${y}/products`,{params:{name:u}});e(a)}catch(a){console.error(a),a instanceof q&&m(a.message);return}finally{r(!1)}},g=async u=>{const a=u.target.value;h(a)},x=t.length===0&&!c;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:S.head,children:[s.jsx(k,{children:"Меню"}),s.jsx(L,{value:l,onChange:g,placeholder:"Введите блюдо или состав"})]}),s.jsxs("div",{children:[x&&s.jsx(s.Fragment,{children:"Не найдено блюд по запросу"}),!c&&t.length>0&&s.jsx(G,{products:t}),c&&s.jsx(s.Fragment,{children:"Загружаем продукты..."}),o&&s.jsx(s.Fragment,{children:o})]})]})}export{K as Menu,K as default};
